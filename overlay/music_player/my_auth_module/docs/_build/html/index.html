
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Welcome to Flask-HTTPAuth’s documentation! &#8212; Flask-HTTPAuth  documentation</title>
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
  
  
  <div class=indexwrapper>
  


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-flask-httpauth-s-documentation">
<h1>Welcome to Flask-HTTPAuth’s documentation!<a class="headerlink" href="#welcome-to-flask-httpauth-s-documentation" title="Permalink to this headline">¶</a></h1>
<p><strong>Flask-HTTPAuth</strong> is a Flask extension that simplifies the use of HTTP authentication with Flask routes.</p>
<div class="section" id="basic-authentication-examples">
<h2>Basic authentication examples<a class="headerlink" href="#basic-authentication-examples" title="Permalink to this headline">¶</a></h2>
<p>The following example application uses HTTP Basic authentication to protect route <code class="docutils literal notranslate"><span class="pre">'/'</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_httpauth</span> <span class="kn">import</span> <span class="n">HTTPBasicAuth</span>
<span class="kn">from</span> <span class="nn">werkzeug.security</span> <span class="kn">import</span> <span class="n">generate_password_hash</span><span class="p">,</span> <span class="n">check_password_hash</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">auth</span> <span class="o">=</span> <span class="n">HTTPBasicAuth</span><span class="p">()</span>

<span class="n">users</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;john&quot;</span><span class="p">:</span> <span class="n">generate_password_hash</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">),</span>
    <span class="s2">&quot;susan&quot;</span><span class="p">:</span> <span class="n">generate_password_hash</span><span class="p">(</span><span class="s2">&quot;bye&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="nd">@auth</span><span class="o">.</span><span class="n">verify_password</span>
<span class="k">def</span> <span class="nf">verify_password</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">username</span> <span class="ow">in</span> <span class="n">users</span> <span class="ow">and</span> \
            <span class="n">check_password_hash</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="p">),</span> <span class="n">password</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">username</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="nd">@auth</span><span class="o">.</span><span class="n">login_required</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Hello, </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">auth</span><span class="o">.</span><span class="n">current_user</span><span class="p">())</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>The function decorated with the <code class="docutils literal notranslate"><span class="pre">verify_password</span></code> decorator receives the username and password sent by the client. If the credentials belong to a user, then the function should return the user object. If the credentials are invalid the functon can return <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>. The user object can then be queries from the <code class="docutils literal notranslate"><span class="pre">current_user()</span></code> method of the authentication instance.</p>
</div>
<div class="section" id="digest-authentication-example">
<h2>Digest authentication example<a class="headerlink" href="#digest-authentication-example" title="Permalink to this headline">¶</a></h2>
<p>The following example uses HTTP Digest authentication:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_httpauth</span> <span class="kn">import</span> <span class="n">HTTPDigestAuth</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;secret key here&#39;</span>
<span class="n">auth</span> <span class="o">=</span> <span class="n">HTTPDigestAuth</span><span class="p">()</span>

<span class="n">users</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;john&quot;</span><span class="p">:</span> <span class="s2">&quot;hello&quot;</span><span class="p">,</span>
    <span class="s2">&quot;susan&quot;</span><span class="p">:</span> <span class="s2">&quot;bye&quot;</span>
<span class="p">}</span>

<span class="nd">@auth</span><span class="o">.</span><span class="n">get_password</span>
<span class="k">def</span> <span class="nf">get_pw</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">username</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">users</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="nd">@auth</span><span class="o">.</span><span class="n">login_required</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Hello, </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">auth</span><span class="o">.</span><span class="n">username</span><span class="p">())</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="security-concerns-with-digest-authentication">
<h3>Security Concerns with Digest Authentication<a class="headerlink" href="#security-concerns-with-digest-authentication" title="Permalink to this headline">¶</a></h3>
<p>The digest authentication algorithm requires a <em>challenge</em> to be sent to the client for use in encrypting the password for transmission. This challenge needs to be used again when the password is decoded at the server, so the challenge information needs to be stored so that it can be recalled later.</p>
<p>By default, Flask-HTTPAuth stores the challenge data in the Flask session. To make the authentication flow secure when using session storage, it is required that server-side sessions are used instead of the default Flask cookie based sessions, as this ensures that the challenge data is not at risk of being captured as it moves in a cookie between server and client. The Flask-Session and Flask-KVSession extensions are both very good options to implement server-side sessions.</p>
<p>As an alternative to using server-side sessions, an application can implement its own generation and storage of challenge data. To do this, there are four callback functions that the application needs to implement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@auth</span><span class="o">.</span><span class="n">generate_nonce</span>
<span class="k">def</span> <span class="nf">generate_nonce</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Return the nonce value to use for this client.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="nd">@auth</span><span class="o">.</span><span class="n">generate_opaque</span>
<span class="k">def</span> <span class="nf">generate_opaque</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Return the opaque value to use for this client.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="nd">@auth</span><span class="o">.</span><span class="n">verify_nonce</span>
<span class="k">def</span> <span class="nf">verify_nonce</span><span class="p">(</span><span class="n">nonce</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Verify that the nonce value sent by the client is correct.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="nd">@auth</span><span class="o">.</span><span class="n">verify_opaque</span>
<span class="k">def</span> <span class="nf">verify_opaque</span><span class="p">(</span><span class="n">opaque</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Verify that the opaque value sent by the client is correct.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>For information of what the <code class="docutils literal notranslate"><span class="pre">nonce</span></code> and <code class="docutils literal notranslate"><span class="pre">opaque</span></code> values are and how they are used in digest authentication, consult <a class="reference external" href="http://tools.ietf.org/html/rfc2617#section-3.2.1">RFC 2617</a>.</p>
</div>
</div>
<div class="section" id="token-authentication-example">
<h2>Token Authentication Example<a class="headerlink" href="#token-authentication-example" title="Permalink to this headline">¶</a></h2>
<p>The following example application uses a custom HTTP authentication scheme to protect route <code class="docutils literal notranslate"><span class="pre">'/'</span></code> with a token:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">g</span>
<span class="kn">from</span> <span class="nn">flask_httpauth</span> <span class="kn">import</span> <span class="n">HTTPTokenAuth</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">auth</span> <span class="o">=</span> <span class="n">HTTPTokenAuth</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;Bearer&#39;</span><span class="p">)</span>

<span class="n">tokens</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;secret-token-1&quot;</span><span class="p">:</span> <span class="s2">&quot;john&quot;</span><span class="p">,</span>
    <span class="s2">&quot;secret-token-2&quot;</span><span class="p">:</span> <span class="s2">&quot;susan&quot;</span>
<span class="p">}</span>

<span class="nd">@auth</span><span class="o">.</span><span class="n">verify_token</span>
<span class="k">def</span> <span class="nf">verify_token</span><span class="p">(</span><span class="n">token</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">tokens</span><span class="p">[</span><span class="n">token</span><span class="p">]</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="nd">@auth</span><span class="o">.</span><span class="n">login_required</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Hello, </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">auth</span><span class="o">.</span><span class="n">current_user</span><span class="p">())</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">HTTPTokenAuth</span></code> is a generic authentication handler that can be used with non-standard authentication schemes, with the scheme name given as an argument in the constructor. In the above example, the <code class="docutils literal notranslate"><span class="pre">WWW-Authenticate</span></code> header provided by the server will use <code class="docutils literal notranslate"><span class="pre">Bearer</span></code> as scheme:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WWW</span><span class="o">-</span><span class="n">Authenticate</span><span class="p">:</span> <span class="n">Bearer</span> <span class="n">realm</span><span class="o">=</span><span class="s2">&quot;Authentication Required&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">verify_token</span></code> callback receives the authentication credentials provided by the client on the <code class="docutils literal notranslate"><span class="pre">Authorization</span></code> header. This can be a simple token, or can contain multiple arguments, which the function will have to parse and extract from the string. As with the <code class="docutils literal notranslate"><span class="pre">verify_password</span></code>, the function should return the user object if the token is valid.</p>
<p>In the examples directory you can find a complete example that uses JWS tokens. JWS tokens are similar to JWT tokens. However using JWT tokens would require an external dependency.</p>
</div>
<div class="section" id="using-multiple-authentication-schemes">
<h2>Using Multiple Authentication Schemes<a class="headerlink" href="#using-multiple-authentication-schemes" title="Permalink to this headline">¶</a></h2>
<p>Applications sometimes need to support a combination of authentication
methods. For example, a web application could be authenticated by
sending client id and secret over basic authentication, while third
party API clients use a JWS or JWT bearer token. The <cite>MultiAuth</cite> class allows you to protect a route with more than one authentication object. To grant access to the endpoint, one of the authentication methods must validate.</p>
<p>In the examples directory you can find a complete example that uses basic and token authentication.</p>
</div>
<div class="section" id="user-roles">
<h2>User Roles<a class="headerlink" href="#user-roles" title="Permalink to this headline">¶</a></h2>
<p>Flask-HTTPAuth includes a simple role-based authentication system that can optionally be added to provide an additional layer of granularity in filtering accesses to routes. To enable role support, write a function that returns the list of roles for a given user and decorate it with the <code class="docutils literal notranslate"><span class="pre">get_user_roles</span></code> decorator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@auth</span><span class="o">.</span><span class="n">get_user_roles</span>
<span class="k">def</span> <span class="nf">get_user_roles</span><span class="p">(</span><span class="n">user</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span class="n">get_roles</span><span class="p">()</span>
</pre></div>
</div>
<p>To restrict access to a route to users having a given role, add the <code class="docutils literal notranslate"><span class="pre">role</span></code> argument to the <code class="docutils literal notranslate"><span class="pre">login_required</span></code> decorator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin&#39;</span><span class="p">)</span>
<span class="nd">@auth</span><span class="o">.</span><span class="n">login_required</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">admins_only</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Hello </span><span class="si">{}</span><span class="s2">, you are an admin!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">auth</span><span class="o">.</span><span class="n">current_user</span><span class="p">())</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">role</span></code> argument can take a list of roles, in which case users who have any of the given roles will be granted access:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin&#39;</span><span class="p">)</span>
<span class="nd">@auth</span><span class="o">.</span><span class="n">login_required</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;moderator&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">admins_only</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Hello </span><span class="si">{}</span><span class="s2">, you are an admin or a moderator!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">auth</span><span class="o">.</span><span class="n">current_user</span><span class="p">())</span>
</pre></div>
</div>
<p>In the most advanced usage, users can be filtered by having multiple roles:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin&#39;</span><span class="p">)</span>
<span class="nd">@auth</span><span class="o">.</span><span class="n">login_required</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;moderator&#39;</span><span class="p">,</span> <span class="s1">&#39;contributor&#39;</span><span class="p">]])</span>
<span class="k">def</span> <span class="nf">admins_only</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Hello </span><span class="si">{}</span><span class="s2">, you are a user or a moderator/contributor!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">auth</span><span class="o">.</span><span class="n">current_user</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="deployment-considerations">
<h2>Deployment Considerations<a class="headerlink" href="#deployment-considerations" title="Permalink to this headline">¶</a></h2>
<p>Be aware that some web servers do not pass the <code class="docutils literal notranslate"><span class="pre">Authorization</span></code> headers to the WSGI application by default. For example, if you use Apache with mod_wsgi, you have to set option <code class="docutils literal notranslate"><span class="pre">WSGIPassAuthorization</span> <span class="pre">On</span></code> as <a class="reference external" href="https://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIPassAuthorization/">documented here</a>.</p>
</div>
<div class="section" id="deprecated-basic-authentication-options">
<h2>Deprecated Basic Authentication Options<a class="headerlink" href="#deprecated-basic-authentication-options" title="Permalink to this headline">¶</a></h2>
<p>Before the <code class="docutils literal notranslate"><span class="pre">verify_password</span></code> described above existed there were other simpler mechanisms for implementing basic authentication. While these are deprecated they are still maintained. However, the <code class="docutils literal notranslate"><span class="pre">verify_password</span></code> callback should be preferred as it provides greater security and flexibility.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">get_password</span></code> callback needs to return the password associated with the username given as argument. Flask-HTTPAuth will allow access only if <code class="docutils literal notranslate"><span class="pre">get_password(username)</span> <span class="pre">==</span> <span class="pre">password</span></code>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@auth</span><span class="o">.</span><span class="n">get_password</span>
<span class="k">def</span> <span class="nf">get_password</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">get_password_for_username</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
</pre></div>
</div>
<p>Using this callback alone is in general not a good idea because it requires passwords to be available in plaintext in the server. In the more likely scenario that the passwords are stored hashed in a user database, then an additional callback is needed to define how to hash a password:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@auth</span><span class="o">.</span><span class="n">hash_password</span>
<span class="k">def</span> <span class="nf">hash_pw</span><span class="p">(</span><span class="n">password</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">hash_password</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example, you have to replace <code class="docutils literal notranslate"><span class="pre">hash_password()</span></code> with the specific hashing function used in your application. When the <code class="docutils literal notranslate"><span class="pre">hash_password</span></code> callback is provided, access will be granted when <code class="docutils literal notranslate"><span class="pre">get_password(username)</span> <span class="pre">==</span> <span class="pre">hash_password(password)</span></code>.</p>
<p>If the hashing algorithm requires the username to be known then the callback can take two arguments instead of one:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@auth</span><span class="o">.</span><span class="n">hash_password</span>
<span class="k">def</span> <span class="nf">hash_pw</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
    <span class="n">salt</span> <span class="o">=</span> <span class="n">get_salt</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hash_password</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="n">salt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="module-flask_httpauth">
<span id="api-documentation"></span><h2>API Documentation<a class="headerlink" href="#module-flask_httpauth" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="flask_httpauth.HTTPBasicAuth">
<em class="property">class </em><code class="sig-prename descclassname">flask_httpauth.</code><code class="sig-name descname">HTTPBasicAuth</code><a class="headerlink" href="#flask_httpauth.HTTPBasicAuth" title="Permalink to this definition">¶</a></dt>
<dd><p>This class handles HTTP Basic authentication for Flask routes.</p>
<dl class="py method">
<dt id="flask_httpauth.HTTPBasicAuth.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">scheme</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">realm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPBasicAuth.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a basic authentication object.</p>
<p>If the optional <code class="docutils literal notranslate"><span class="pre">scheme</span></code> argument is provided, it will be used instead of the standard “Basic” scheme in the <code class="docutils literal notranslate"><span class="pre">WWW-Authenticate</span></code> response. A fairly common practice is to use a custom scheme to prevent browsers from prompting the user to login.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">realm</span></code> argument can be used to provide an application defined realm with the <code class="docutils literal notranslate"><span class="pre">WWW-Authenticate</span></code> header.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPBasicAuth.verify_password">
<code class="sig-name descname">verify_password</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">verify_password_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPBasicAuth.verify_password" title="Permalink to this definition">¶</a></dt>
<dd><p>If defined, this callback function will be called by the framework to verify that the username and password combination provided by the client are valid. The callback function takes two arguments, the username and the password. It must return the user object if credentials are valid, or <code class="docutils literal notranslate"><span class="pre">True</span></code> if a user object is not available. In case of failed authentication, it should return <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>. Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@auth</span><span class="o">.</span><span class="n">verify_password</span>
<span class="k">def</span> <span class="nf">verify_password</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">username</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">user</span> <span class="ow">and</span> <span class="n">passlib</span><span class="o">.</span><span class="n">hash</span><span class="o">.</span><span class="n">sha256_crypt</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">password_hash</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">user</span>
</pre></div>
</div>
<p>If this callback is defined, it is also invoked when the request does not have the <code class="docutils literal notranslate"><span class="pre">Authorization</span></code> header with user credentials, and in this case both the <code class="docutils literal notranslate"><span class="pre">username</span></code> and <code class="docutils literal notranslate"><span class="pre">password</span></code> arguments are set to empty strings. The application can opt to return <code class="docutils literal notranslate"><span class="pre">True</span></code> in this case and that will allow anonymous users access to the route. The callback function can indicate that the user is anonymous by writing a state variable to <code class="docutils literal notranslate"><span class="pre">flask.g</span></code> or by checking if <code class="docutils literal notranslate"><span class="pre">auth.current_user()</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Note that when a <code class="docutils literal notranslate"><span class="pre">verify_password</span></code> callback is provided the <code class="docutils literal notranslate"><span class="pre">get_password</span></code> and <code class="docutils literal notranslate"><span class="pre">hash_password</span></code> callbacks are not used.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPBasicAuth.get_user_roles">
<code class="sig-name descname">get_user_roles</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">roles_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPBasicAuth.get_user_roles" title="Permalink to this definition">¶</a></dt>
<dd><p>If defined, this callback function will be called by the framework to obtain the roles assigned to a given user. The callback function takes a single argument, the user for which roles are requested. The user object passed to this function will be the one returned by the <code class="docutils literal notranslate"><span class="pre">verify_callback</span></code> function. The function should return the role or list of roles that belong to the user. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@auth</span><span class="o">.</span><span class="n">get_user_roles</span>
<span class="k">def</span> <span class="nf">get_user_roles</span><span class="p">(</span><span class="n">user</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span class="n">get_roles</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPBasicAuth.get_password">
<code class="sig-name descname">get_password</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">password_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPBasicAuth.get_password" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Deprecated</em> This callback function will be called by the framework to obtain the password for a given user. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@auth</span><span class="o">.</span><span class="n">get_password</span>
<span class="k">def</span> <span class="nf">get_password</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">db</span><span class="o">.</span><span class="n">get_user_password</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPBasicAuth.hash_password">
<code class="sig-name descname">hash_password</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hash_password_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPBasicAuth.hash_password" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Deprecated</em> If defined, this callback function will be called by the framework to apply a custom hashing algorithm to the password provided by the client. If this callback isn’t provided the password will be checked unchanged. The callback can take one or two arguments. The one argument version receives the password to hash, while the two argument version receives the username and the password in that order. Example single argument callback:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@auth</span><span class="o">.</span><span class="n">hash_password</span>
<span class="k">def</span> <span class="nf">hash_password</span><span class="p">(</span><span class="n">password</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">md5</span><span class="p">(</span><span class="n">password</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</pre></div>
</div>
<p>Example two argument callback:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@auth</span><span class="o">.</span><span class="n">hash_password</span>
<span class="k">def</span> <span class="nf">hash_pw</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
    <span class="n">salt</span> <span class="o">=</span> <span class="n">get_salt</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="n">salt</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPBasicAuth.error_handler">
<code class="sig-name descname">error_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">error_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPBasicAuth.error_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>If defined, this callback function will be called by the framework when it is necessary to send an authentication error back to the client. The function can take one argument, the status code of the error, which can be 401 (incorrect credentials) or 403 (correct, but insufficient credentials). To preserve compatiiblity with older releases of this package, the function can also be defined without arguments. The return value from this function must by any accepted response type in Flask routes. If this callback isn’t provided a default error response is generated. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@auth</span><span class="o">.</span><span class="n">error_handler</span>
<span class="k">def</span> <span class="nf">auth_error</span><span class="p">(</span><span class="n">status</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;Access Denied&quot;</span><span class="p">,</span> <span class="n">status</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPBasicAuth.login_required">
<code class="sig-name descname">login_required</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">view_function_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPBasicAuth.login_required" title="Permalink to this definition">¶</a></dt>
<dd><p>This callback function will be called when authentication is successful. This will typically be a Flask view function. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/private&#39;</span><span class="p">)</span>
<span class="nd">@auth</span><span class="o">.</span><span class="n">login_required</span>
<span class="k">def</span> <span class="nf">private_page</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Only for authorized people!&quot;</span>
</pre></div>
</div>
<p>An optional <code class="docutils literal notranslate"><span class="pre">role</span></code> argument can be given to further restrict access by roles. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/private&#39;</span><span class="p">)</span>
<span class="nd">@auth</span><span class="o">.</span><span class="n">login_required</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">private_page</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Only for admins!&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPBasicAuth.current_user">
<code class="sig-name descname">current_user</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPBasicAuth.current_user" title="Permalink to this definition">¶</a></dt>
<dd><p>The user object returned by the <code class="docutils literal notranslate"><span class="pre">verify_password</span></code> callback on successful authentication. If no user is returned by the callback, this is set to the username passed by the client. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="nd">@auth</span><span class="o">.</span><span class="n">login_required</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">current_user</span><span class="p">()</span>
    <span class="k">return</span> <span class="s2">&quot;Hello, </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPBasicAuth.username">
<code class="sig-name descname">username</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPBasicAuth.username" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Deprecated</em> A view function that is protected with this class can access the logged username through this method. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="nd">@auth</span><span class="o">.</span><span class="n">login_required</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Hello, </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">auth</span><span class="o">.</span><span class="n">username</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="flask_httpauth.HTTPDigestAuth">
<em class="property">class </em><code class="sig-prename descclassname">flask_httpauth.</code><code class="sig-name descname">HTTPDigestAuth</code><a class="headerlink" href="#flask_httpauth.HTTPDigestAuth" title="Permalink to this definition">¶</a></dt>
<dd><p>This class handles HTTP Digest authentication for Flask routes. The <code class="docutils literal notranslate"><span class="pre">SECRET_KEY</span></code> configuration must be set in the Flask application to enable the session to work. Flask by default stores user sessions in the client as secure cookies, so the client must be able to handle cookies. To make this authentication method secure, a <a class="reference external" href="http://flask.pocoo.org/docs/api/#flask.Flask.session_interface">session interface</a> that writes sessions in the server must be used.</p>
<dl class="py method">
<dt id="flask_httpauth.HTTPDigestAuth.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">scheme</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">realm</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">use_ha1_pw</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPDigestAuth.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a digest authentication object.</p>
<p>If the optional <code class="docutils literal notranslate"><span class="pre">scheme</span></code> argument is provided, it will be used instead of the “Digest” scheme in the <code class="docutils literal notranslate"><span class="pre">WWW-Authenticate</span></code> response. A fairly common practice is to use a custom scheme to prevent browsers from prompting the user to login.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">realm</span></code> argument can be used to provide an application defined realm with the <code class="docutils literal notranslate"><span class="pre">WWW-Authenticate</span></code> header.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">use_ha1_pw</span></code> is False, then the <code class="docutils literal notranslate"><span class="pre">get_password</span></code> callback needs to return the plain text password for the given user. If <code class="docutils literal notranslate"><span class="pre">use_ha1_pw</span></code> is True, the <code class="docutils literal notranslate"><span class="pre">get_password</span></code> callback needs to return the HA1 value for the given user. The advantage of setting <code class="docutils literal notranslate"><span class="pre">use_ha1_pw</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> is that it allows the application to store the HA1 hash of the password in the user database.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPDigestAuth.generate_ha1">
<code class="sig-name descname">generate_ha1</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span></em>, <em class="sig-param"><span class="n">password</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPDigestAuth.generate_ha1" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the HA1 hash that can be stored in the user database when <code class="docutils literal notranslate"><span class="pre">use_ha1_pw</span></code> is set to True in the constructor.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPDigestAuth.generate_nonce">
<code class="sig-name descname">generate_nonce</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nonce_making_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPDigestAuth.generate_nonce" title="Permalink to this definition">¶</a></dt>
<dd><p>If defined, this callback function will be called by the framework to
generate a nonce.  If this is defined, <code class="docutils literal notranslate"><span class="pre">verify_nonce</span></code> should
also be defined.</p>
<p>This can be used to use a state storage mechanism other than the session.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPDigestAuth.verify_nonce">
<code class="sig-name descname">verify_nonce</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nonce_verify_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPDigestAuth.verify_nonce" title="Permalink to this definition">¶</a></dt>
<dd><p>If defined, this callback function will be called by the framework to
verify that a nonce is valid.  It will be called with a single argument:
the nonce to be verified.</p>
<p>This can be used to use a state storage mechanism other than the session.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPDigestAuth.generate_opaque">
<code class="sig-name descname">generate_opaque</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">opaque_making_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPDigestAuth.generate_opaque" title="Permalink to this definition">¶</a></dt>
<dd><p>If defined, this callback function will be called by the framework to
generate an opaque value.  If this is defined, <code class="docutils literal notranslate"><span class="pre">verify_opaque</span></code> should
also be defined.</p>
<p>This can be used to use a state storage mechanism other than the session.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPDigestAuth.verify_opaque">
<code class="sig-name descname">verify_opaque</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">opaque_verify_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPDigestAuth.verify_opaque" title="Permalink to this definition">¶</a></dt>
<dd><p>If defined, this callback function will be called by the framework to
verify that an opaque value is valid.  It will be called with a single
argument: the opaque value to be verified.</p>
<p>This can be used to use a state storage mechanism other than the session.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPDigestAuth.get_password">
<code class="sig-name descname">get_password</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">password_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPDigestAuth.get_password" title="Permalink to this definition">¶</a></dt>
<dd><p>See basic authentication for documentation and examples.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPDigestAuth.get_user_roles">
<code class="sig-name descname">get_user_roles</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">roles_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPDigestAuth.get_user_roles" title="Permalink to this definition">¶</a></dt>
<dd><p>See basic authentication for documentation and examples.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPDigestAuth.error_handler">
<code class="sig-name descname">error_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">error_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPDigestAuth.error_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>See basic authentication for documentation and examples.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPDigestAuth.login_required">
<code class="sig-name descname">login_required</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">view_function_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPDigestAuth.login_required" title="Permalink to this definition">¶</a></dt>
<dd><p>See basic authentication for documentation and examples.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPDigestAuth.current_user">
<code class="sig-name descname">current_user</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPDigestAuth.current_user" title="Permalink to this definition">¶</a></dt>
<dd><p>See basic authentication for documentation and examples.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPDigestAuth.username">
<code class="sig-name descname">username</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPDigestAuth.username" title="Permalink to this definition">¶</a></dt>
<dd><p>See basic authentication for documentation and examples.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="flask_httpauth.HTTPTokenAuth">
<em class="property">class </em><code class="sig-prename descclassname">flask_httpauth.</code><code class="sig-name descname">HTTPTokenAuth</code><a class="headerlink" href="#flask_httpauth.HTTPTokenAuth" title="Permalink to this definition">¶</a></dt>
<dd><p>This class handles HTTP authentication with custom schemes for Flask routes.</p>
<dl class="py method">
<dt id="flask_httpauth.HTTPTokenAuth.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">scheme</span><span class="o">=</span><span class="default_value">'Bearer'</span></em>, <em class="sig-param"><span class="n">realm</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">header</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPTokenAuth.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a token authentication object.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">scheme</span></code> argument can be use to specify the scheme to be used in the <code class="docutils literal notranslate"><span class="pre">WWW-Authenticate</span></code> response. The <code class="docutils literal notranslate"><span class="pre">Authorization</span></code> header sent by the client must include this scheme followed by the token. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Authorization</span><span class="p">:</span> <span class="n">Bearer</span> <span class="n">this</span><span class="o">-</span><span class="ow">is</span><span class="o">-</span><span class="n">my</span><span class="o">-</span><span class="n">token</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">realm</span></code> argument can be used to provide an application defined realm with the <code class="docutils literal notranslate"><span class="pre">WWW-Authenticate</span></code> header.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">header</span></code> argument can be used to specify a custom header instead of <code class="docutils literal notranslate"><span class="pre">Authorization</span></code> from where to obtain the token. If a custom header is used, the <code class="docutils literal notranslate"><span class="pre">scheme</span></code> should not be included. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">X</span><span class="o">-</span><span class="n">API</span><span class="o">-</span><span class="n">Key</span><span class="p">:</span> <span class="n">this</span><span class="o">-</span><span class="ow">is</span><span class="o">-</span><span class="n">my</span><span class="o">-</span><span class="n">token</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPTokenAuth.verify_token">
<code class="sig-name descname">verify_token</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">verify_token_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPTokenAuth.verify_token" title="Permalink to this definition">¶</a></dt>
<dd><p>This callback function will be called by the framework to verify that the credentials sent by the client with the <code class="docutils literal notranslate"><span class="pre">Authorization</span></code> header are valid. The callback function takes one argument, the token provided by the client. The function must return the user object if the token is valid, or <code class="docutils literal notranslate"><span class="pre">True</span></code> if a user object is not available. In case of a failed authentication, the function should return <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>. Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@auth</span><span class="o">.</span><span class="n">verify_token</span>
<span class="k">def</span> <span class="nf">verify_token</span><span class="p">(</span><span class="n">token</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that a <code class="docutils literal notranslate"><span class="pre">verify_token</span></code> callback is required when using this class.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPTokenAuth.get_user_roles">
<code class="sig-name descname">get_user_roles</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">roles_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPTokenAuth.get_user_roles" title="Permalink to this definition">¶</a></dt>
<dd><p>See basic authentication for documentation and examples.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPTokenAuth.error_handler">
<code class="sig-name descname">error_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">error_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPTokenAuth.error_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>See basic authentication for documentation and examples.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPTokenAuth.login_required">
<code class="sig-name descname">login_required</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">view_function_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPTokenAuth.login_required" title="Permalink to this definition">¶</a></dt>
<dd><p>See basic authentication for documentation and examples.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPTokenAuth.current_user">
<code class="sig-name descname">current_user</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPTokenAuth.current_user" title="Permalink to this definition">¶</a></dt>
<dd><p>See basic authentication for documentation and examples.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="flask_httpauth.HTTPMultiAuth">
<em class="property">class </em><code class="sig-prename descclassname">flask_httpauth.</code><code class="sig-name descname">HTTPMultiAuth</code><a class="headerlink" href="#flask_httpauth.HTTPMultiAuth" title="Permalink to this definition">¶</a></dt>
<dd><p>This class handles HTTP authentication with custom schemes for Flask routes.</p>
<dl class="py method">
<dt id="flask_httpauth.HTTPMultiAuth.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">auth_object</em>, <em class="sig-param">...</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPMultiAuth.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a multiple authentication object.</p>
<p>The arguments are one or more instances of <code class="docutils literal notranslate"><span class="pre">HTTPBasicAuth</span></code>, <code class="docutils literal notranslate"><span class="pre">HTTPDigestAuth</span></code> or <code class="docutils literal notranslate"><span class="pre">HTTPTokenAuth</span></code>. A route protected with this authentication method will try all the given authentication objects until one succeeds.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPMultiAuth.login_required">
<code class="sig-name descname">login_required</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">view_function_callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPMultiAuth.login_required" title="Permalink to this definition">¶</a></dt>
<dd><p>See basic authentication for documentation and examples.</p>
</dd></dl>

<dl class="py method">
<dt id="flask_httpauth.HTTPMultiAuth.current_user">
<code class="sig-name descname">current_user</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_httpauth.HTTPMultiAuth.current_user" title="Permalink to this definition">¶</a></dt>
<dd><p>See basic authentication for documentation and examples.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <a href="http://github.com/miguelgrinberg/Flask-HTTPAuth"><img style="position: fixed; top: 0; right: 0; border: 0;"
    src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
  

  
  </div>
  

  </body>
</html>